# 社交平台爬虫


## 自动化和逆向

爬虫的第一关就是从 API 中获取数据，大体上分自动化和逆向两种方法，自动化就是直接控制设备或者浏览器，模拟用户的真实操作，这样目标软件很难检测。逆向是指找到目标数据的接口，然后破解加密直接发请求，我不是很懂逆向，我只知道对于 js 逆向，常见的破解加密的方式包括补环境和纯算。

>  逆向工程和 js 逆向不完全相同，js 逆向只针对浏览器环境下 HTTP API 的解密，而 github 上的逆向工程话题往往涉及对二进制文件的解密。如果你有意学习 js 逆向，[bilibili - 志远js逆向](https://www.bilibili.com/video/BV1t94y1f7Ex/) 是一个质量非常高的入门教程，但是大多数时候我们不太需要手动进行逆向，因为社交平台的加密算法更新后，开源社区往往会很快跟进。


自动化也叫自动化测试，因为最开始这些自动化软件只是被设计用来自动测试软件功能是否正常，没想到后来被用作爬虫。我只接触过浏览器自动化，浏览器自动化目前最宏观的发展趋势就是随着 webDriver 检测技术的普及，爬虫技术生态已经全面从 webDriver 向 CDP（Chrome DevTools Protocol）转移。最广为人知的 webDriver框架就是 selenium，CDP 也有许多新秀，比如 js 的 Playwright, Puppeteer, Crawlee，python 的 DrissionPage, NoDriver。

另一个新的趋势是 webDriver 和 CDP 的融合 —— WebDriver BiDi，目前没有流行的单独支持WebDriver BiDi 的框架，而是各大已有框架和浏览器在逐步兼容新的 WebDriver BiDi 协议。

| 特性        | WebDriver (传统)    | CDP                           | WebDriver BiDi          |
| :-------- | :---------------- | :---------------------------- | :---------------------- |
| **通信机制**  | 单向的 HTTP 请求-响应模型  | 双向的 WebSocket 连接              | 双向的 WebSocket 连接        |
| **协议性质**  | 由 W3C 制定的**开放标准** | 由 Chrome/Chromium 维护的**私有协议** | 正在制定中的 **W3C 开放标准**     |
| **浏览器覆盖** | **真正的跨浏览器**       | **主要限于 Chromium 内核**          | **设计为跨浏览器**             |
| **核心特点**  | 稳定、兼容性好，但无法实时监听事件 | 功能强大、性能高，但非跨浏览器标准             | 旨在提供标准、跨浏览器且支持实时事件的双向通信 |

### 开源工具

对于自定义的需求，一般可以自己通过自动化框架解决，上手非常简单。我们的场景是社交平台爬虫，这类爬虫已经有比较成熟的开源工具，可以直接解决我们的数据源问题。


1. [MediaCrawler](https://github.com/NanmiCoder/MediaCrawler): 用户数量多，支持的平台数多，但是对抖音好像不太行，有pro版需要付费，既有playright自动化，也有逆向API。
2. [Douyin_TikTok_Download_API](https://github.com/Evil0ctal/Douyin_TikTok_Download_API)：针对抖音，纯逆向API，但是没有搜索关键字，有API文档。
3. [erma0/douyin](https://github.com/erma0/douyin): 针对抖音，纯逆向API，有关键字搜索，前端功能极其丰富，没有http api


## 账号池和风控

一个账号获取数据过快过多会容易被平台检测，对于大规模的处理需要搭建账号池。

抖音账号可以直接买，在 github 搜索 `抖音白号` 就会看到很多引流仓库，常见的一个平台是  https://k02.cc ，需要使用 USDT 交易。

>  **USDT（泰达币）** 是一种与美元1:1锚定的稳定币，是加密货币交易中的常用媒介。
>  1. **在币安获取USDT的流程：**
> 	1. **注册与认证**：完成币安账户注册和实名认证（KYC）。
> 	2. **C2C交易购买**：在App中找到“C2C交易”或“一键买币”，选择支持支付宝/微信/银行卡的商家，用人民币购买USDT。付款后USDT将存入你的资金账户。
> 2. **在币安使用USDT交易的流程：**
> 	1. **资金划转**：将USDT从“资金账户”划转至“现货账户” 。
> 	2. **币币交易**：在“现货交易”区选择交易对（如BTC/USDT），即可用USDT购买其他加密货币，可选择市价单（即时成交）或限价单（指定价格成交）。
> **关键提示**：务必使用本人实名账户进行支付，并优先选择成交量大、好评率高的信誉商家以保障安全。


另外还需要住宅IP代理，如果所有的账号都使用同一个IP可能也会被检测，为了尽可能模拟真实情况，也许一两个账号共用一个IP会更好，一个国内住宅IP代理：[90代理](https://www.90daili.com/article/1/73.html) 。

